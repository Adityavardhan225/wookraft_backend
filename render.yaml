services:
  - name: woopos-web
    type: web
    env: python
    region: oregon
    buildCommand: pip install -r requirements.txt
    startCommand: uvicorn main:app --host 0.0.0.0 --port 8000

  - name: celery-campaign-combined
    type: worker
    env: python
    region: oregon
    buildCommand: pip install -r requirements.txt
    startCommand: celery -A routes.campaign.sending_campaign.services.campaign_tasks worker --beat --loglevel=info --pool=solo
    envVars:
      - key: REDIS_URL
        sync: false

  - name: celery-discount-combined
    type: worker
    env: python
    region: oregon
    buildCommand: pip install -r requirements.txt
    startCommand: celery -A routes.admin_function.discount_calculation worker --beat --loglevel=info --pool=solo
    envVars:
      - key: REDIS_URL
        sync: false
